{"version":3,"file":"compareImages.js","sourceRoot":"","sources":["../../src/resemble/compareImages.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,mDAAsC;AAItC,SAA8B,aAAa,CAAC,MAAc,EAAE,MAAc,EAAE,OAA0B;;;YAKlG,WAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;oBACzB,IAAA,KAAuC,OAAO,CAAC,eAAe,IAAI,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM;wBACjG,CAAC,CAAC;4BACE,eAAe,EAAE,MAAM;4BACvB,eAAe,EAAE,MAAM;yBAC1B;wBACD,CAAC,CAAC,EAAE,eAAe,EAAE,MAAM,EAAE,eAAe,EAAE,MAAM,EAAE,EALlD,eAAe,qBAAA,EAAE,eAAe,qBAKkB,CAAA;oBAE1D,QAAQ,CAAC,OAAO,CAAC,eAAe,EAAE,eAAe,EAAE,OAAO,EAAE,UAAC,GAAQ,EAAE,IAAS;wBAC5E,IAAI,GAAG,EAAE,CAAC;4BACN,MAAM,CAAC,GAAG,CAAC,CAAA;wBACf,CAAC;6BAAM,CAAC;4BACJ,OAAO,CAAC,IAAI,CAAC,CAAA;wBACjB,CAAC;oBACL,CAAC,CAAC,CAAA;gBACN,CAAC,CAAC,EAAA;;;CACL;AArBD,gCAqBC","sourcesContent":["/* istanbul ignore file */\nimport * as resemble from 'resemblejs'\nimport type { ComparisonOptions } from 'resemblejs'\nimport type { CompareData } from './compare.interfaces'\n\nexport default async function compareImages(image1: Buffer, image2: Buffer, options: ComparisonOptions): Promise<CompareData> {\n    /**\n     * Resemble.js implemented in the way that scales 2nd images to the size of 1st.\n     * Experimentally proven that downscaling images produces more accurate result than upscaling\n     */\n    return new Promise((resolve, reject) => {\n        const { imageToCompare1, imageToCompare2 } = options.scaleToSameSize && image1.length > image2.length\n            ? {\n                imageToCompare1: image2,\n                imageToCompare2: image1,\n            }\n            : { imageToCompare1: image1, imageToCompare2: image2 }\n\n        resemble.compare(imageToCompare1, imageToCompare2, options, (err: any, data: any) => {\n            if (err) {\n                reject(err)\n            } else {\n                resolve(data)\n            }\n        })\n    })\n}\n"]}